<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title># d3-brush</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../../../markdown.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="d3-brush">d3-brush</h1>
<p>Brushing is the interactive specification a one- or two-dimensional
selected region using a pointing gesture, such as by clicking and
dragging the mouse. Brushing is often used to select discrete elements,
such as dots in a scatterplot or files on a desktop. It can also be used
to zoom-in to a region of interest, or to select continuous regions for
<a href="http://square.github.io/crossfilter/">cross-filtering data</a>
or live histograms:</p>
<p><a
href="http://bl.ocks.org/mbostock/0d20834e3d5a46138752f86b9b79727e"><img alt="Mona Lisa Histogram" src="https://raw.githubusercontent.com/d3/d3-brush/master/img/mona-lisa.jpg" width="420" height="219"></a></p>
<p>The d3-brush module implements brushing for mouse and touch events
using <a href="https://www.w3.org/TR/SVG/">SVG</a>. Click and drag on
the brush selection to translate the selection. Click and drag on one of
the selection handles to move the corresponding edge (or edges) of the
selection. Click and drag on the invisible overlay to define a new brush
selection, or click anywhere within the brushable region while holding
down the META (⌘) key. Holding down the ALT (⌥) key while moving the
brush causes it to reposition around its center, while holding down
SPACE locks the current brush size, allowing only translation.</p>
<p>Brushes also support programmatic control. For example, you can
listen to <a href="#brush-events"><em>end</em> events</a>, and then
initiate a transition with <a href="#brush_move"><em>brush</em>.move</a>
to snap the brush selection to semantic boundaries:</p>
<p><a
href="http://bl.ocks.org/mbostock/6232537"><img alt="Brush Snapping" src="https://raw.githubusercontent.com/d3/d3-brush/master/img/snapping.png" width="420" height="219"></a></p>
<h2 id="installing">Installing</h2>
<p>If you use NPM, <code>npm install d3-brush</code>. Otherwise,
download the <a
href="https://github.com/d3/d3-brush/releases/latest">latest
release</a>. You can also load directly from <a
href="https://d3js.org">d3js.org</a>, either as a <a
href="https://d3js.org/d3-brush.v1.min.js">standalone library</a> or as
part of <a href="https://github.com/d3/d3">D3 4.0</a>. AMD, CommonJS,
and vanilla environments are supported. In vanilla, a <code>d3</code>
global is exported:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-color.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-dispatch.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-ease.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-interpolate.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-timer.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-selection.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-transition.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-drag.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://d3js.org/d3-brush.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> brush <span class="op">=</span> d3<span class="op">.</span><span class="fu">brush</span>()<span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/script&gt;</span></span></code></pre></div>
<p><a href="https://tonicdev.com/npm/d3-brush">Try d3-brush in your
browser.</a></p>
<h2 id="api-reference">API Reference</h2>
<p><a href="#brush" name="brush">#</a> d3.<b>brush</b>() <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L131"
title="Source">&lt;&gt;</a></p>
<p>Creates a new two-dimensional brush.</p>
<p><a href="#brushX" name="brushX">#</a> d3.<b>brushX</b>() <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L123"
title="Source">&lt;&gt;</a></p>
<p>Creates a new one-dimensional brush along the
<em>x</em>-dimension.</p>
<p><a href="#brushY" name="brushY">#</a> d3.<b>brushY</b>() <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L127"
title="Source">&lt;&gt;</a></p>
<p>Creates a new one-dimensional brush along the
<em>y</em>-dimension.</p>
<p><a href="#_brush" name="_brush">#</a> <i>brush</i>(<i>group</i>) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L142"
title="Source">&lt;&gt;</a></p>
<p>Applies the brush to the specified <em>group</em>, which must be a <a
href="https://github.com/d3/d3-selection">selection</a> of SVG <a
href="https://www.w3.org/TR/SVG/struct.html#Groups">G elements</a>. This
function is typically not invoked directly, and is instead invoked via
<a
href="https://github.com/d3/d3-selection#selection_call"><em>selection</em>.call</a>.
For example, to render a brush:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>svg<span class="op">.</span><span class="fu">append</span>(<span class="st">&quot;g&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;class&quot;</span><span class="op">,</span> <span class="st">&quot;brush&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">brush</span>()<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;brush&quot;</span><span class="op">,</span> brushed))<span class="op">;</span></span></code></pre></div>
<p>Internally, the brush uses <a
href="https://github.com/d3/d3-selection#selection_on"><em>selection</em>.on</a>
to bind the necessary event listeners for dragging. The listeners use
the name <code>.brush</code>, so you can subsequently unbind the brush
event listeners as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>group<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;.brush&quot;</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></span></code></pre></div>
<p>The brush also creates the SVG elements necessary to display the
brush selection and to receive input events for interaction. You can
add, remove or modify these elements as desired to change the brush
appearance; you can also apply stylesheets to modify the brush
appearance. The structure of a two-dimensional brush is as follows:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;g</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;brush&quot;</span> <span class="er">fill</span><span class="ot">=</span><span class="st">&quot;none&quot;</span> <span class="er">pointer-events</span><span class="ot">=</span><span class="st">&quot;all&quot;</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;overlay&quot;</span> <span class="er">pointer-events</span><span class="ot">=</span><span class="st">&quot;all&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;crosshair&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;0&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;0&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;960&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;500&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;selection&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;move&quot;</span> <span class="er">fill</span><span class="ot">=</span><span class="st">&quot;#777&quot;</span> <span class="er">fill-opacity</span><span class="ot">=</span><span class="st">&quot;0.3&quot;</span> <span class="er">stroke</span><span class="ot">=</span><span class="st">&quot;#fff&quot;</span> <span class="er">shape-rendering</span><span class="ot">=</span><span class="st">&quot;crispEdges&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;112&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;194&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;182&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;83&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--n&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;ns-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;107&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;189&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;192&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--e&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;ew-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;289&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;189&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;93&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--s&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;ns-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;107&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;272&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;192&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--w&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;ew-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;107&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;189&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;93&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--nw&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;nwse-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;107&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;189&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--ne&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;nesw-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;289&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;189&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--se&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;nwse-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;289&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;272&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;rect</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;handle handle--sw&quot;</span> <span class="er">cursor</span><span class="ot">=</span><span class="st">&quot;nesw-resize&quot;</span> <span class="er">x</span><span class="ot">=</span><span class="st">&quot;107&quot;</span> <span class="er">y</span><span class="ot">=</span><span class="st">&quot;272&quot;</span> <span class="er">width</span><span class="ot">=</span><span class="st">&quot;10&quot;</span> <span class="er">height</span><span class="ot">=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/rect&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/g&gt;</span></span></code></pre></div>
<p>The overlay rect covers the brushable area defined by <a
href="#brush_extent"><em>brush</em>.extent</a>. The selection rect
covers the area defined by the current <a href="#brushSelection">brush
selection</a>. The handle rects cover the edges and corners of the brush
selection, allowing the corresponding value in the brush selection to be
modified interactively. To modify the brush selection programmatically,
use <a href="#brush_move"><em>brush</em>.move</a>.</p>
<p><a href="#brush_move" name="brush_move">#</a>
<i>brush</i>.<b>move</b>(<i>group</i>, <i>selection</i>) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L189"
title="Source">&lt;&gt;</a></p>
<p>Sets the active <em>selection</em> of the brush on the specified
<em>group</em>, which must be a <a
href="https://github.com/d3/d3-selection">selection</a> or a <a
href="https://github.com/d3/d3-transition">transition</a> of SVG <a
href="https://www.w3.org/TR/SVG/struct.html#Groups">G elements</a>. The
<em>selection</em> must be defined as an array of numbers, or null to
clear the brush selection. For a <a href="#brush">two-dimensional
brush</a>, it must be defined as [[<em>x0</em>, <em>y0</em>],
[<em>x1</em>, <em>y1</em>]], where <em>x0</em> is the minimum
<em>x</em>-value, <em>y0</em> is the minimum <em>y</em>-value,
<em>x1</em> is the maximum <em>x</em>-value, and <em>y1</em> is the
maximum <em>y</em>-value. For an <a href="#brushX"><em>x</em>-brush</a>,
it must be defined as [<em>x0</em>, <em>x1</em>]; for a <a
href="#brushY"><em>y</em>-brush</a>, it must be defined as [<em>y0</em>,
<em>y1</em>]. The selection may also be specified as a function which
returns such an array; if a function, it is invoked for each selected
element, being passed the current datum <code>d</code> and index
<code>i</code>, with the <code>this</code> context as the current DOM
element. The returned array defines the brush selection for that
element.</p>
<p><a href="#brush_extent" name="brush_extent">#</a>
<i>brush</i>.<b>extent</b>([<i>extent</i>]) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L521"
title="Source">&lt;&gt;</a></p>
<p>If <em>extent</em> is specified, sets the brushable extent to the
specified array of points [[<em>x0</em>, <em>y0</em>], [<em>x1</em>,
<em>y1</em>]], where [<em>x0</em>, <em>y0</em>] is the top-left corner
and [<em>x1</em>, <em>y1</em>] is the bottom-right corner, and returns
this brush. The <em>extent</em> may also be specified as a function
which returns such an array; if a function, it is invoked for each
selected element, being passed the current datum <code>d</code> and
index <code>i</code>, with the <code>this</code> context as the current
DOM element. If <em>extent</em> is not specified, returns the current
extent accessor, which defaults to:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">extent</span>() {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> svg <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">ownerSVGElement</span> <span class="op">||</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [[<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [svg<span class="op">.</span><span class="at">width</span><span class="op">.</span><span class="at">baseVal</span><span class="op">.</span><span class="at">value</span><span class="op">,</span> svg<span class="op">.</span><span class="at">height</span><span class="op">.</span><span class="at">baseVal</span><span class="op">.</span><span class="at">value</span>]]<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This default implementation requires that the owner SVG element have
defined <a
href="https://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute">width</a>
and <a
href="https://www.w3.org/TR/SVG/struct.html#SVGElementHeightAttribute">height</a>
attributes rather than (for example) relying on CSS properties or the
viewBox attribute; SVG provides no programmatic method for retrieving
the <a
href="https://www.w3.org/TR/SVG/coords.html#ViewportSpace">initial
viewport size</a>. Alternatively, consider using <a
href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect"><em>element</em>.getBoundingClientRect</a>.
(In Firefox, <a
href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth"><em>element</em>.clientWidth</a>
and <a
href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight"><em>element</em>.clientHeight</a>
is zero for SVG elements!)</p>
<p>The brush extent determines the size of the invisible overlay and
also constrains the brush selection; the brush selection cannot go
outside the brush extent.</p>
<p><a href="#brush_filter" name="brush_filter">#</a>
<i>brush</i>.<b>filter</b>([<i>filter</i>]) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L525"
title="Source">&lt;&gt;</a></p>
<p>If <em>filter</em> is specified, sets the filter to the specified
function and returns the brush. If <em>filter</em> is not specified,
returns the current filter, which defaults to:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">filter</span>() {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">!</span><span class="bu">event</span><span class="op">.</span><span class="at">button</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>If the filter returns falsey, the initiating event is ignored and no
brush gesture is started. Thus, the filter determines which input events
are ignored. The default filter ignores mousedown events on secondary
buttons, since those buttons are typically intended for other purposes,
such as the context menu.</p>
<p><a href="#brush_handleSize" name="brush_handleSize">#</a>
<i>brush</i>.<b>handleSize</b>([<i>size</i>]) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L529"
title="Source">&lt;&gt;</a></p>
<p>If <em>size</em> is specified, sets the size of the brush handles to
the specified number and returns the brush. If <em>size</em> is not
specified, returns the current handle size, which defaults to six. This
method must be called before <a href="#_brush">applying the brush</a> to
a selection; changing the handle size does not affect brushes that were
previously rendered.</p>
<p><a href="#brush_on" name="brush_on">#</a>
<i>brush</i>.<b>on</b>(<i>typenames</i>, [<i>listener</i>]) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L533"
title="Source">&lt;&gt;</a></p>
<p>If <em>listener</em> is specified, sets the event <em>listener</em>
for the specified <em>typenames</em> and returns the brush. If an event
listener was already registered for the same type and name, the existing
listener is removed before the new listener is added. If
<em>listener</em> is null, removes the current event listeners for the
specified <em>typenames</em>, if any. If <em>listener</em> is not
specified, returns the first currently-assigned listener matching the
specified <em>typenames</em>, if any. When a specified event is
dispatched, each <em>listener</em> will be invoked with the same context
and arguments as <a
href="https://github.com/d3/d3-selection#selection_on"><em>selection</em>.on</a>
listeners: the current datum <code>d</code> and index <code>i</code>,
with the <code>this</code> context as the current DOM element.</p>
<p>The <em>typenames</em> is a string containing one or more
<em>typename</em> separated by whitespace. Each <em>typename</em> is a
<em>type</em>, optionally followed by a period (<code>.</code>) and a
<em>name</em>, such as <code>brush.foo</code> and
<code>brush.bar</code>; the name allows multiple listeners to be
registered for the same <em>type</em>. The <em>type</em> must be one of
the following:</p>
<ul>
<li><code>start</code> - at the start of a brush gesture, such as on
mousedown.</li>
<li><code>brush</code> - when the brush moves, such as on
mousemove.</li>
<li><code>end</code> - at the end of a brush gesture, such as on
mouseup.</li>
</ul>
<p>See <a
href="https://github.com/d3/d3-dispatch#dispatch_on"><em>dispatch</em>.on</a>
and <a href="#brush-events">Brush Events</a> for more.</p>
<p><a href="#brushSelection" name="brushSelection">#</a>
d3.<b>brushSelection</b>(<i>node</i>) <a
href="https://github.com/d3/d3-brush/blob/master/src/brush.js#L118"
title="Source">&lt;&gt;</a></p>
<p>Returns the current brush selection for the specified <em>node</em>.
Internally, an element’s brush state is stored as
<em>element</em>.__brush; however, you should use this method rather
than accessing it directly. If the given <em>node</em> has no selection,
returns null. Otherwise, the <em>selection</em> is defined as an array
of numbers. For a <a href="#brush">two-dimensional brush</a>, it is
[[<em>x0</em>, <em>y0</em>], [<em>x1</em>, <em>y1</em>]], where
<em>x0</em> is the minimum <em>x</em>-value, <em>y0</em> is the minimum
<em>y</em>-value, <em>x1</em> is the maximum <em>x</em>-value, and
<em>y1</em> is the maximum <em>y</em>-value. For an <a
href="#brushX"><em>x</em>-brush</a>, it is [<em>x0</em>, <em>x1</em>];
for a <a href="#brushY"><em>y</em>-brush</a>, it is [<em>y0</em>,
<em>y1</em>].</p>
<h3 id="brush-events">Brush Events</h3>
<p>When a <a href="#brush_on">brush event listener</a> is invoked, <a
href="https://github.com/d3/d3-selection#event">d3.event</a> is set to
the current brush event. The <em>event</em> object exposes several
fields:</p>
<ul>
<li><code>target</code> - the associated <a href="#brush">brush
behavior</a>.</li>
<li><code>type</code> - the string “start”, “brush” or “end”; see <a
href="#brush_on"><em>brush</em>.on</a>.</li>
<li><code>selection</code> - the current <a href="#brushSelection">brush
selection</a>.</li>
<li><code>sourceEvent</code> - the underlying input event, such as
mousemove or touchmove.</li>
</ul>
</body>
</html>
